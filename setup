# Current issues - leaning scripts is fun!
# Currently the iTerm2 preferences get set to the .dotfiles dirctory correctly but for some reason the checkmark is not enables and the preferences aren't set.
# iTerm2 colour preset still has to be set manually even though it looks like it has been enabled
# Need 'SF Mono' font installed

#!/bin/zsh

BASEDIR=$HOME/.dotfiles

# Install OMZ
if [ ! -f $HOME/.oh-my-zsh/oh-my-zsh.sh ]; then
	sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended
	rm $HOME/.zshrc
fi

#Symlink configs
ln -s $BASEDIR/.zshrc $HOME
ln -s $BASEDIR/.vim $HOME

# Install OMZ plugins
if [ ! -f $HOME/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh ]; then
	git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $HOME/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting
fi
if [ ! -f $HOME/.oh-my-zsh/custom/themes/common.zsh-theme ]; then
	wget -O $HOME/.oh-my-zsh/custom/themes/common.zsh-theme https://raw.githubusercontent.com/jackharrisonsherlock/common/master/common.zsh-theme
fi


# Install kitty terminal
if [ ! -f /Applications/kitty.app/Contents/MacOS/kitty ]; then
	curl -L https://sw.kovidgoyal.net/kitty/installer.sh | sh /dev/stdin
	ln -s $BASEDIR/kitty.conf $HOME/.config/kitty/
	ln -s $BASEDIR/atom-one-dark.conf $HOME/.config/kitty/
fi

#Set iterm2 preferences
#defaults write com.googlecode.iterm2.plist PrefsCustomFolder -string "$BASEDIR"
#defaults write com.googlecode.itermw.plist LoadPrefsFromCustomFolder -bool true
